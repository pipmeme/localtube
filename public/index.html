<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LocalTube</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
    <header class="header">
        <div class="left-section">
            <span class="material-icons menu-icon">menu</span>
            <div class="logo-container" onclick="goHome()">
                <div class="logo-icon">â–º</div>
                <span class="logo-text">LocalTube</span>
            </div>
        </div>
        <div class="middle-section">
            <div class="search-bar">
                <input class="search-input" type="text" placeholder="Search saved videos" id="searchInput">
                <button class="search-button">
                    <span class="material-icons">search</span>
                </button>
            </div>
        </div>
        <div class="right-section">
            <span class="material-icons" title="Refresh Video Library" onclick="refreshLibrary()"
                style="color:var(--secondary-text);">refresh</span>
            <span class="material-icons" title="Settings" onclick="openSettings()">settings</span>
            <span class="material-icons" title="Upload Local Folder">video_call</span>
            <span class="material-icons">apps</span>
            <span class="material-icons">notifications</span>
            <img class="user-avatar" src="https://ui-avatars.com/api/?name=Local+User&background=random" alt="User">
        </div>
    </header>

    <div class="main-body">
        <nav class="sidebar">
            <div class="sidebar-link active" id="homeLink" onclick="goHome()">
                <span class="material-icons">home</span>
                <div>Home</div>
            </div>
            <div class="sidebar-link">
                <span class="material-icons">explore</span>
                <div>Explore</div>
            </div>
            <div class="sidebar-link">
                <span class="material-icons">subscriptions</span>
                <div>Subscriptions</div>
            </div>
            <div class="sidebar-divider"></div>
            <div class="sidebar-link">
                <span class="material-icons">video_library</span>
                <div>Library</div>
            </div>
            <div class="sidebar-link" id="historyLink" onclick="showHistory()">
                <span class="material-icons">history</span>
                <div>History</div>
            </div>
            <div class="sidebar-link">
                <span class="material-icons">smart_display</span>
                <div>Your videos</div>
            </div>
            <div class="sidebar-link">
                <span class="material-icons">watch_later</span>
                <div>Watch later</div>
            </div>
            <div class="sidebar-link">
                <span class="material-icons">thumb_up</span>
                <div>Liked videos</div>
            </div>
        </nav>

        <main class="content-wrapper">
            <!-- Grid View -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                <div class="categories" id="categoriesBar" style="margin-bottom: 0;">
                    <button class="category active" onclick="filterCategory('All')">All</button>
                    <button class="category" onclick="filterCategory('Downloads')">Downloads</button>
                    <button class="category" onclick="filterCategory('Movies')">Movies</button>
                    <button class="category" onclick="filterCategory('Tutorials')">Tutorials</button>
                    <button class="category" onclick="filterCategory('Gaming')">Gaming</button>
                    <button class="category" onclick="filterCategory('Music')">Music</button>
                </div>

                <select id="sortDropdown" class="search-input"
                    style="width:auto; padding:8px; border:1px solid var(--border-color); border-radius:4px; max-height:40px; margin-left: 16px;"
                    onchange="applySort()">
                    <option value="default">Sort by: Default</option>
                    <option value="name">Name (A-Z)</option>
                    <option value="dateNew">Date (Newest)</option>
                    <option value="dateOld">Date (Oldest)</option>
                </select>
            </div>

            <div class="video-grid" id="videoGrid">
                <!-- Videos will be injected here via JS -->
            </div>

            <!-- Player View (hidden by default) -->
            <div class="player-container" id="playerContainer" style="display: none;">
                <div class="player-main">
                    <video id="videoPlayer" controls autoplay></video>
                    <div class="video-info-section">
                        <h1 class="video-title" id="playerTitle">Video Title</h1>
                        <div class="video-meta-row">
                            <div class="video-stats">
                                <span id="playerViews">1.2M views</span> &bull; <span id="playerDate">2 days ago</span>
                            </div>
                            <div class="video-actions">
                                <label
                                    style="display:flex; align-items:center; gap:8px; margin-right:8px; cursor:pointer;"
                                    title="Autoplay Next Video">
                                    <span style="font-size:14px; font-weight:500;">Autoplay</span>
                                    <input type="checkbox" id="autoplayToggle" style="width:16px; height:16px;" checked>
                                </label>
                                <button class="action-btn" onclick="togglePiP()" title="Picture-in-Picture"><span
                                        class="material-icons">picture_in_picture_alt</span> PiP</button>
                                <button class="action-btn"><span class="material-icons">thumb_up</span> Like</button>
                                <button class="action-btn"><span class="material-icons">playlist_add</span>
                                    Save</button>
                                <button class="action-btn" onclick="deleteCurrentVideo()" id="deleteBtn"
                                    style="color: #ff4e4e;"><span class="material-icons">delete</span>
                                    Delete</button>
                            </div>
                        </div>
                        <div class="channel-info-row">
                            <img class="channel-avatar"
                                src="https://ui-avatars.com/api/?name=LT&background=ff0000&color=fff" alt="Channel">
                            <div class="channel-details">
                                <div class="channel-name">Local Downloads</div>
                                <div class="channel-subs">100M subscribers</div>
                            </div>
                            <button class="subscribe-btn">SUBSCRIBE</button>
                        </div>
                        <div class="video-description">
                            <p>This video is playing directly from your PC's local storage.</p>
                            <p>Stored at: <span id="playerPath"></span></p>
                        </div>
                    </div>
                </div>
                <div class="player-sidebar" id="recommendedGrid">
                    <!-- Recommended videos will be injected here via JS -->
                </div>
            </div>
        </main>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>LocalTube Settings</h2>
                <span class="material-icons close-modal" onclick="closeSettings()">close</span>
            </div>
            <div class="modal-body">
                <h3>Custom Video Folders</h3>
                <p style="color:var(--secondary-text); font-size:14px; margin-bottom:12px;">Add absolute paths to
                    folders on your PC containing videos (e.g. C:\\Users\\Name\\Videos).</p>
                <div style="display:flex; gap:8px; margin-bottom:16px;">
                    <input type="text" id="newFolderInput" class="search-input"
                        style="border:1px solid var(--border-color); border-radius:4px;"
                        placeholder="Full folder path...">
                    <button class="subscribe-btn" style="border-radius:4px;" onclick="addFolder()">Add Folder</button>
                </div>
                <div id="foldersList"
                    style="background:#1a1a1a; padding:12px; border-radius:8px; max-height:200px; overflow-y:auto;">
                    <!-- Added via JS -->
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>